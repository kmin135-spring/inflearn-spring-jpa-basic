# 개요

## Entity 정의

* entity가 만든 DDL을 운영에 그대로 쓸 수는 없으나
* 칼럼의 length 라거나 nullable같은거나 테이블의 유니크, 각종 인덱스도 entity에 정의해두는게 좋다.
* 그래야 실제 db를 까보지 않고도 개발자가 entity 객체만 보고 제약조건이나 JPQL을 작성할 때 어떤 인덱스를 쓸지 빠르게 결정할 수 있다.

## PK

* Long 이나 UUID 와 같은 대체키를 사용해라
  * 자연키는 언젠가 바뀔 수 있다!

## 연관관계

* 외래키가 있는 쪽을 주인으로 정해라
  * 테이블이 있는 쪽에 생기니 직관적이다.
* 단방향 매핑만으로 이미 연관관계 매핑은 완료된다.
  * 최초에는 단방향 매핑으로 설계를 끝내라.
  * 양방향 매핑은 필요할 때 정의해서 써라 (JPQL 짤 때 필요하면, 객체 그래프 탐색이 필요해서, ...)
    * 단방향으로도 모두 가능하지만 비즈니스적으로 양방향이 필요하다고 판단될 때 양방향으로 만든다.
  * 양방향 매핑을 나중에 추가하는건 쉬운 작업이다. (테이블에 영향을 주지 않음)
  * 왜냐하면 양방향은 연관관계 매핑, 무한 참조등 고려할 사항이 늘어나기 때문